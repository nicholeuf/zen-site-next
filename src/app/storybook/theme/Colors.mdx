import React from 'react';
import { Meta, ColorPalette, ColorItem } from '@storybook/addon-docs/blocks';
import { useTheme } from '@mui/material';
import { ThemeProvider } from '@mui/material/styles';

import createTheme from '../../styles/theme';
import constants from '../../styles/constants';

<Meta title='Theme/Colors' />

export const ThemeColorPalette = () => {
  const theme = useTheme();
  const paletteItems = [
    { title: 'primary.main', subtitle: constants.colors.guava, colors: { guava: theme.palette.primary.main } },
    { title: 'secondary.main', subtitle: constants.colors.carob, colors: { carob: theme.palette.secondary.main } },
    { title: 'background.default', subtitle: constants.colors.cream, colors: { cream: theme.palette.background.default } },
    { title: 'background.paper', subtitle: '#fff', colors: { white: theme.palette.background.paper } },
    { title: 'text.primary', subtitle: constants.colors.carob, colors: { carob: theme.palette.text.primary } },
    { title: 'text.secondary', subtitle: theme.palette.text.secondary, colors: { secondary: theme.palette.text.secondary } },
    // project constants
    { title: 'constants.colors.guava', subtitle: constants.colors.guava, colors: { guava: constants.colors.guava } },
    { title: 'constants.colors.carob', subtitle: constants.colors.carob, colors: { carob: constants.colors.carob } },
    { title: 'constants.colors.cream', subtitle: constants.colors.cream, colors: { cream: constants.colors.cream } },
    { title: 'constants.colors.gunmetal', subtitle: constants.colors.gunmetal, colors: { gunmetal: constants.colors.gunmetal } },
  ];

  return (
    <ColorPalette>
      {paletteItems.map((p) => (
        <ColorItem key={p.title} title={p.title} subtitle={p.subtitle} colors={p.colors} />
      ))}
    </ColorPalette>
  );
};

# Colors

Documentation of the theme color palette used across the application. The
`Palette` story renders a set of swatches including MUI theme tokens and
project-specific constants so you can preview the colors and their hex values.

## Palette

<ThemeProvider theme={createTheme('desktop')}>
  <ThemeColorPalette />
</ThemeProvider>

## Usage

Use these tokens as the single source of truth for colors in the app. Prefer
theme tokens (for example `theme.palette.primary.main`) over hard-coded hex
values so components automatically pick up theme-level adjustments.

Note: this project does not use a dark mode variant — the palette is
designed for the light theme. When choosing or adjusting colors, ensure they
provide sufficient contrast in the light theme rather than relying on a
dark-mode fallback.

- Buttons and primary actions: `theme.palette.primary.main`
- Secondary accents and subtle calls-to-action: `theme.palette.secondary.main`
- Backgrounds: `theme.palette.background.default` / `theme.palette.background.paper`
- Text: `theme.palette.text.primary` / `theme.palette.text.secondary`
- Project-specific constants (see `constants.colors`) may be used for
  decorative elements, but prefer palette tokens for interactive UI elements.

### Example

When styling with the `sx` prop or `styled()` helper, reference theme tokens:

```tsx
// preferred — responds to theme mode
<Box sx={{ backgroundColor: (theme) => theme.palette.primary.main }} />

// avoid — harder to update globally
<Box sx={{ backgroundColor: '#5aa897' }} />
```

## Accessibility

Color is one cue among many. Keep the following accessibility considerations in
mind when applying palette colors:

- Contrast: Ensure sufficient contrast between text and background. Aim for
  at least 4.5:1 for body text and 3:1 for large text. Use `theme.palette.getContrastText` or a contrast checker during design.
- Do not rely on color alone to convey status (errors, success, warnings). Add
  icons, labels, or patterns to communicate meaning.
- Focus and hover states: Interactive elements should show clear focus and
  hover indicators that don't rely solely on color changes (outline, underline,
  or elevation changes are recommended).
  -- Test in light (project default) and, if you ever add a dark theme, dark
  modes: some colors that pass contrast in one mode may fail in the other;
  prefer palette tokens which adapt automatically.
- Provide text alternatives for color-only charts or decorative color maps.
